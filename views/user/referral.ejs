<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, shrink-to-fit=9">
		<meta name="description" content="Gambolthemes">
		<meta name="author" content="Gambolthemes">		
		<title>Fairway Supermarket</title>
		
		<!-- Favicon Icon -->
		<link rel="icon" type="image/png" href="images/fav.png">
		
		<!-- Stylesheets -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		
		<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
		<link href='/user/vendor/unicons-2.0.1/css/unicons.css' rel='stylesheet'>
		<link href="/user/css/style.css" rel="stylesheet">
		<link href="/user/css/responsive.css" rel="stylesheet">
		<link href="/user/css/night-mode.css" rel="stylesheet">
		<link href="/user/css/customstyle.css" rel="stylesheet">
		<link  href="/user/css/signupmodals.css"  rel="stylesheet">
        <link  href="/user/css/editProfileModal.css"  rel="stylesheet">
		<link  href="/user/css/referral.css"  rel="stylesheet">
		<!-- Vendor Stylesheets -->
		<link href="/user/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
		<link href="/user/vendor/OwlCarousel/assets/owl.carousel.css" rel="stylesheet">
		<link href="/user/vendor/OwlCarousel/assets/owl.theme.default.min.css" rel="stylesheet">
		<link href="/user/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link href="/user/vendor/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet">	
        
		
		
	</head>


	<body>
		<!-- Header Start -->
		<%- include('../partials/user/header', { parentCategories: parentCategories }) %>
		

		
		<!-- Header End -->
	
		<!-- Body Start -->
        <%- include('../partials/user/dashboardOverview') %>
						<div class="col-xl-9 col-lg-8 col-md-12">
							<div class="dashboard-right">
								<div class="row">
									<div class="col-md-12">
										<div class="main-title-tab">
											<h4><i class="uil uil-apps"></i>Referral</h4>
										</div>
										<div class="referral-container">
											<div class="referral-header">
												<h4><i class="uil uil-users-alt"></i> Refer & Earn</h4>
												<p>Share with friends and earn rewards!</p>
											</div>
										
											<div class="referral-card">
												<div class="referral-code-section">
													<h5>Your Referral Code</h5>
													<div class="code-display">
														<span id="referralCode"><%= referralDetails.referralCode %></span>
														<button class="copy-btn" onclick="copyReferralCode()">
															<i class="uil uil-copy"></i>
														</button>
													</div>
												</div>
										
												<div class="rewards-info">
													<div class="reward-item">
														<i class="uil uil-money-bill"></i>
														<div class="reward-text">
															<h6>₹100</h6>
															<p>For every friend's first purchase</p>
														</div>
													</div>
													<div class="reward-item">
														<i class="uil uil-wallet"></i>
														<div class="reward-text">
															<h6>₹50</h6>
															<p>For your friend on their first purchase</p>
														</div>
													</div>
												</div>
										
												<div class="share-section">
													<h5>Share via</h5>
													<div class="share-buttons">
														<button onclick="shareWhatsApp()">
															<i class="fab fa-whatsapp"></i> WhatsApp
														</button>
														<button onclick="shareEmail()">
															<i class="far fa-envelope"></i> Email
														</button>
														<button onclick="shareCopy()">
															<i class="far fa-copy"></i> Copy Link
														</button>
													</div>
												</div>
											</div>
										
											<div class="referral-stats">
												<div class="stats-card">
													<h5>Your Earnings</h5>
													<div class="earning-amount">₹<%= referralDetails.totalEarnings %></div>
													<p>Total earned from referrals</p>
												</div>
										
												<div class="referred-users">
													<h5>Referred Friends (<%= referralDetails.referredUsers.length %>)</h5>
													<% if(referralDetails.referredUsers.length > 0) { %>
														<div class="users-list">
															<% referralDetails.referredUsers.forEach(ref => { %>
																<div class="user-item">
																	<div class="user-info">
																		<h6><%= ref.user.name %></h6>
																		<small>Joined <%= new Date(ref.joinedAt).toLocaleDateString() %></small>
																	</div>
																	<div class="status <%= ref.purchaseCompleted ? 'completed' : 'pending' %>">
																		<%= ref.purchaseCompleted ? 'Purchased' : 'Pending' %>
																	</div>
																</div>
															<% }); %>
														</div>
													<% } else { %>
														<div class="no-referrals">
															<p>You haven't referred anyone yet</p>
														</div>
													<% } %>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>	
				</div>	
			</div>	
		</div>
        <!-- Edit progile Reset Password Model -->
        
        <%- include('../partials/user/resetResetModal') %>

        
	<!-- Body End -->
	<!-- Footer Start -->
	
	<!-- Footer End -->

	<!-- Javascripts -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/user/js/jquery.min.js"></script>
	<script src="/user/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="/user/vendor/bootstrap-select/js/bootstrap-select.min.js"></script>	
	<script src="/user/vendor/OwlCarousel/owl.carousel.js"></script>
	<script src="/user/js/jquery.countdown.min.js"></script>
	<script src="/user/js/custom.js"></script>
	<script src="/user/js/offset_overlay.js"></script>
	<script src="/user/js/night-mode.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="/user/js/editReset.js"></script>
	
	
</body>
</html>